# Solution du Challenge TP-01
#
# Ce workflow CI pour un projet Python :
# 1. Se déclenche sur push (main) et pull_request
# 2. Récupère le code source
# 3. Installe Python 3.11
# 4. Installe les dépendances
# 5. Exécute les tests pytest

name: CI

# Déclencheurs
on:
  push:
    branches:
      - main
  pull_request:
    branches:
      - main

# Permissions minimales (bonne pratique sécurité)
permissions:
  contents: read

jobs:
  test:
    name: Tests Python
    runs-on: ubuntu-latest

    steps:
      # Étape 1 : Récupérer le code source
      - name: Checkout du code
        uses: actions/checkout@v4

      # Étape 2 : Installer Python 3.11
      - name: Installer Python
        uses: actions/setup-python@v5
        with:
          python-version: '3.11'

      # Étape 3 : Installer les dépendances
      - name: Installer les dépendances
        run: pip install -r requirements.txt

      # Étape 4 : Exécuter les tests
      - name: Lancer les tests
        run: pytest -v
